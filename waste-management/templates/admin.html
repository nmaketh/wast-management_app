{% extends 'base.html' %}

{% block title %}
Admin Dashboard
{% endblock title %}

{% block body %}

  <!-- Flash messages -->
  {% with messages=get_flashed_messages(with_categories=true) %}
  {% if messages %}
  {% for category, message in messages %}
  <div class="alert alert-{{category}} alert-dismissible fade show" role="alert">
    {{message}}
    <button type="button" class="close" data-dismiss="alert" aria-label="Close">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  {% endfor %}
  {% endif %}
  {% endwith %}

  <!-- System Performance -->
  <h2>System Performance</h2>
  <div class="system-performance">
    <p>Uptime: {{ system.uptime }}</p>
    <p>Response Time: {{ system.response_time }}</p>
  </div>

  <!-- User Management -->
<!-- User Management -->
<h2>User Management</h2>
<!-- User Management Table -->

<!-- Collection Management -->
<h2>Collection Management</h2>
<table class="table table-bordered">
  <thead>
    <tr>
      <th scope="col">User Email</th>
      <th scope="col">Collection Date</th>
      <th scope="col">Collection Time</th>
      <th scope="col">Image</th>
      <th scope="col">Actions</th>
    </tr>
  </thead>
  <tbody>
  {% for collection in collections %}
    <tr>
      <td>{{ collection.email }}</td>
      <td>{{ collection.collectionDate }}</td>
      <td>{{ collection.collectionTime }}</td>
      <td><img src="{{ collection.imagePath }}" alt="Collection Image"></td>
      <td>
        <a href="/edit-collection/{{ collection.id }}"><button class="btn btn-primary">Edit</button></a>
        <a href="/delete-collection/{{ collection.id }}"><button class="btn btn-danger">Delete</button></a>
      </td>
    </tr>
  {% endfor %}
  </tbody>
</table>

<!-- Recycling Tracker -->
<h2>Recycling Tracker</h2>
<canvas id="recyclingChart"></canvas>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="{{ url_for('static', filename='recyclingChart.js') }}"></script>

{% endblock body %}